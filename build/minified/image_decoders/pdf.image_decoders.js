/**
 * @licstart The following is the entire license notice for the
 * Javascript code in this page
 *
 * Copyright 2020 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * Javascript code in this page
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pdfjs-dist/image_decoders/pdf.image_decoders",[],t):"object"==typeof exports?exports["pdfjs-dist/image_decoders/pdf.image_decoders"]=t():e["pdfjs-dist/image_decoders/pdf.image_decoders"]=e.pdfjsImageDecoders=t()}(this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getVerbosityLevel",{enumerable:!0,get:function(){return i.getVerbosityLevel}}),Object.defineProperty(t,"setVerbosityLevel",{enumerable:!0,get:function(){return i.setVerbosityLevel}}),Object.defineProperty(t,"Jbig2mage",{enumerable:!0,get:function(){return r.Jbig2mage}}),Object.defineProperty(t,"JpegImage",{enumerable:!0,get:function(){return s.JpegImage}}),Object.defineProperty(t,"JpxImage",{enumerable:!0,get:function(){return o.JpxImage}});var i=n(1),r=n(3),s=n(7),o=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=u,t.arraysToBytes=function(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let n=0;for(let i=0;i<t;i++)n+=u(e[i]);let i=0;const r=new Uint8Array(n);for(let n=0;n<t;n++){let t=e[n];t instanceof Uint8Array||(t="string"==typeof t?f(t):new Uint8Array(t));const s=t.byteLength;r.set(t,i),i+=s}return r},t.assert=a,t.bytesToString=function(e){a(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");const t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);const n=[];for(let i=0;i<t;i+=8192){const r=Math.min(i+8192,t),s=e.subarray(i,r);n.push(String.fromCharCode.apply(null,s))}return n.join("")},t.createPromiseCapability=function(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get:()=>t}),e.promise=new Promise((function(n,i){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,i(e)}})),e},t.getVerbosityLevel=function(){return r},t.info=function(e){r>=i.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;return e.every((function(e,n){return e===t[n]}))},t.isBool=function(e){return"boolean"==typeof e},t.isEmptyObj=function(e){for(const t in e)return!1;return!0},t.isNum=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(e){return!1}const i=new URL(t,n);return n.origin===i.origin},t.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{const n=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(e){}return null},t.removeNullCharacters=function(e){if("string"!=typeof e)return s("The argument for removeNullCharacters must be a string."),e;return e.replace(h,"")},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(r=e)},t.shadow=c,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=f,t.stringToPDFString=function(e){const t=e.length,n=[];if("þ"===e[0]&&"ÿ"===e[1])for(let i=2;i<t;i+=2)n.push(String.fromCharCode(e.charCodeAt(i)<<8|e.charCodeAt(i+1)));else if("ÿ"===e[0]&&"þ"===e[1])for(let i=2;i<t;i+=2)n.push(String.fromCharCode(e.charCodeAt(i+1)<<8|e.charCodeAt(i)));else for(let i=0;i<t;++i){const t=b[e.charCodeAt(i)];n.push(t?String.fromCharCode(t):e.charAt(i))}return n.join("")},t.stringToUTF8String=function(e){return decodeURIComponent(escape(e))},t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=s,t.unreachable=o,t.IsEvalSupportedCached=t.IsLittleEndianCached=t.createObjectURL=t.FormatError=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.NativeImageDecoding=t.MissingPDFException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=t.BaseException=void 0,n(2);t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"};t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const i={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=i;t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=i.WARNINGS;function s(e){r>=i.WARNINGS&&console.log(`Warning: ${e}`)}function o(e){throw new Error(e)}function a(e,t){e||o(t)}function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}const l=function(){function e(t){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=this.constructor.name}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=l;t.PasswordException=class extends l{constructor(e,t){super(e),this.code=t}};t.UnknownErrorException=class extends l{constructor(e,t){super(e),this.details=t}};t.InvalidPDFException=class extends l{};t.MissingPDFException=class extends l{};t.UnexpectedResponseException=class extends l{constructor(e,t){super(e),this.status=t}};t.FormatError=class extends l{};t.AbortException=class extends l{};const h=/\x00/g;function f(e){a("string"==typeof e,"Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}function u(e){return void 0!==e.length?e.length:(a(void 0!==e.byteLength),e.byteLength)}const d={get value(){return c(this,"value",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}};t.IsLittleEndianCached=d;const p={get value(){return c(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=p;const m=["rgb(",0,",",0,",",0,")"];class g{static makeCssRgb(e,t,n){return m[1]=e,m[3]=t,m[5]=n,m.join("")}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=g.applyTransform(e,t),i=g.applyTransform(e.slice(2,4),t),r=g.applyTransform([e[0],e[3]],t),s=g.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],r[0],s[0]),Math.min(n[1],i[1],r[1],s[1]),Math.max(n[0],i[0],r[0],s[0]),Math.max(n[1],i[1],r[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],o=(n+s)/2,a=Math.sqrt((n+s)*(n+s)-4*(n*s-r*i))/2,c=o+a||1,l=o-a||1;return[Math.sqrt(c),Math.sqrt(l)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){function n(e,t){return e-t}const i=[e[0],e[2],t[0],t[2]].sort(n),r=[e[1],e[3],t[1],t[3]].sort(n),s=[];return e=g.normalizeRect(e),t=g.normalizeRect(t),i[0]===e[0]&&i[1]===t[0]||i[0]===t[0]&&i[1]===e[0]?(s[0]=i[1],s[2]=i[2],r[0]===e[1]&&r[1]===t[1]||r[0]===t[1]&&r[1]===e[1]?(s[1]=r[1],s[3]=r[2],s):null):null}}t.Util=g;const b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];const v=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,n,i=!1){if(!i&&URL.createObjectURL){const e=new Blob([t],{type:n});return URL.createObjectURL(e)}let r=`data:${n};base64,`;for(let n=0,i=t.length;n<i;n+=3){const s=255&t[n],o=255&t[n+1],a=255&t[n+2];r+=e[s>>2]+e[(3&s)<<4|o>>4]+e[n+1<i?(15&o)<<2|a>>6:64]+e[n+2<i?63&a:64]}return r}}();t.createObjectURL=v},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Jbig2Image=void 0;var i=n(1),r=n(4),s=n(5),o=n(6);class a extends i.BaseException{constructor(e){super(`JBIG2 error: ${e}`)}}var c=function(){function e(){}function t(e,t,n){this.data=e,this.start=t,this.end=n}function n(e,t,n){var i=e.getContexts(t),r=1;function s(e){for(var t=0,s=0;s<e;s++){var o=n.readBit(i,r);r=r<256?r<<1|o:511&(r<<1|o)|256,t=t<<1|o}return t>>>0}var o=s(1),a=s(1)?s(1)?s(1)?s(1)?s(1)?s(32)+4436:s(12)+340:s(8)+84:s(6)+20:s(4)+4:s(2);return 0===o?a:a>0?-a:null}function c(e,t,n){for(var i=e.getContexts("IAID"),r=1,s=0;s<n;s++){r=r<<1|t.readBit(i,r)}return n<31?r&(1<<n)-1:2147483647&r}e.prototype={getContexts(e){return e in this?this[e]:this[e]=new Int8Array(65536)}},t.prototype={get decoder(){var e=new s.ArithmeticDecoder(this.data,this.start,this.end);return(0,i.shadow)(this,"decoder",e)},get contextCache(){var t=new e;return(0,i.shadow)(this,"contextCache",t)}};var l=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],h=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],f=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],u=[39717,1941,229,405],d=[32,8];function p(e,t,n,i,r,s,o,a){if(e){return D(new O(a.data,a.start,a.end),t,n,!1)}if(0===i&&!s&&!r&&4===o.length&&3===o[0].x&&-1===o[0].y&&-3===o[1].x&&-1===o[1].y&&2===o[2].x&&-2===o[2].y&&-2===o[3].x&&-2===o[3].y)return function(e,t,n){var i,r,s,o,a,c,l,h=n.decoder,f=n.contextCache.getContexts("GB"),u=[];for(r=0;r<t;r++)for(a=u[r]=new Uint8Array(e),c=r<1?a:u[r-1],i=(l=r<2?a:u[r-2])[0]<<13|l[1]<<12|l[2]<<11|c[0]<<7|c[1]<<6|c[2]<<5|c[3]<<4,s=0;s<e;s++)a[s]=o=h.readBit(f,i),i=(31735&i)<<1|(s+3<e?l[s+3]<<11:0)|(s+4<e?c[s+4]<<4:0)|o;return u}(t,n,a);var c=!!s,l=h[i].concat(o);l.sort((function(e,t){return e.y-t.y||e.x-t.x}));var f,d,p=l.length,m=new Int8Array(p),g=new Int8Array(p),b=[],v=0,y=0,x=0,w=0;for(d=0;d<p;d++)m[d]=l[d].x,g[d]=l[d].y,y=Math.min(y,l[d].x),x=Math.max(x,l[d].x),w=Math.min(w,l[d].y),d<p-1&&l[d].y===l[d+1].y&&l[d].x===l[d+1].x-1?v|=1<<p-1-d:b.push(d);var C=b.length,P=new Int8Array(C),T=new Int8Array(C),I=new Uint16Array(C);for(f=0;f<C;f++)d=b[f],P[f]=l[d].x,T[f]=l[d].y,I[f]=1<<p-1-d;for(var k,S,L,A,E,M=-y,B=-w,U=t-x,R=u[i],_=new Uint8Array(t),F=[],N=a.decoder,z=a.contextCache.getContexts("GB"),H=0,X=0,Y=0;Y<n;Y++){if(r)if(H^=N.readBit(z,R)){F.push(_);continue}for(_=new Uint8Array(_),F.push(_),k=0;k<t;k++)if(c&&s[Y][k])_[k]=0;else{if(k>=M&&k<U&&Y>=B)for(X=X<<1&v,d=0;d<C;d++)S=Y+T[d],L=k+P[d],(A=F[S][L])&&(X|=A=I[d]);else for(X=0,E=p-1,d=0;d<p;d++,E--)(L=k+m[d])>=0&&L<t&&(S=Y+g[d])>=0&&(A=F[S][L])&&(X|=A<<E);var q=N.readBit(z,X);_[k]=q}}return F}function m(e,t,n,i,r,s,o,c,l){var h=f[n].coding;0===n&&(h=h.concat([c[0]]));var u,p=h.length,m=new Int32Array(p),g=new Int32Array(p);for(u=0;u<p;u++)m[u]=h[u].x,g[u]=h[u].y;var b=f[n].reference;0===n&&(b=b.concat([c[1]]));var v=b.length,y=new Int32Array(v),x=new Int32Array(v);for(u=0;u<v;u++)y[u]=b[u].x,x[u]=b[u].y;for(var w=i[0].length,C=i.length,P=d[n],T=[],I=l.decoder,k=l.contextCache.getContexts("GR"),S=0,L=0;L<t;L++){if(o)if(S^=I.readBit(k,P))throw new a("prediction is not supported");var O=new Uint8Array(e);T.push(O);for(var A=0;A<e;A++){var E,D,M=0;for(u=0;u<p;u++)E=L+g[u],D=A+m[u],E<0||D<0||D>=e?M<<=1:M=M<<1|T[E][D];for(u=0;u<v;u++)E=L+x[u]-s,D=A+y[u]-r,E<0||E>=C||D<0||D>=w?M<<=1:M=M<<1|i[E][D];var B=I.readBit(k,M);O[A]=B}}return T}function g(e,t,i,r,s,o,l,h,f,u,d,p,g,b,v,y,x,w,C){if(e&&t)throw new a("refinement with Huffman is not supported");var P,T,I=[];for(P=0;P<r;P++){if(T=new Uint8Array(i),s)for(var k=0;k<i;k++)T[k]=s;I.push(T)}var S=x.decoder,L=x.contextCache,O=e?-b.tableDeltaT.decode(C):-n(L,"IADT",S),A=0;for(P=0;P<o;){O+=e?b.tableDeltaT.decode(C):n(L,"IADT",S);for(var E=A+=e?b.tableFirstS.decode(C):n(L,"IAFS",S);;){let r=0;l>1&&(r=e?C.readBits(w):n(L,"IAIT",S));var D=l*O+r,M=e?b.symbolIDTable.decode(C):c(L,S,f),B=t&&(e?C.readBit():n(L,"IARI",S)),U=h[M],R=U[0].length,_=U.length;if(B){var F=n(L,"IARDW",S),N=n(L,"IARDH",S);U=m(R+=F,_+=N,v,U,(F>>1)+n(L,"IARDX",S),(N>>1)+n(L,"IARDY",S),!1,y,x)}var z,H,X,Y=D-(1&p?0:_-1),q=E-(2&p?R-1:0);if(u){for(z=0;z<_;z++)if(T=I[q+z]){X=U[z];var j=Math.min(i-Y,R);switch(g){case 0:for(H=0;H<j;H++)T[Y+H]|=X[H];break;case 2:for(H=0;H<j;H++)T[Y+H]^=X[H];break;default:throw new a(`operator ${g} is not supported`)}}E+=_-1}else{for(H=0;H<_;H++)if(T=I[Y+H])switch(X=U[H],g){case 0:for(z=0;z<R;z++)T[q+z]|=X[z];break;case 2:for(z=0;z<R;z++)T[q+z]^=X[z];break;default:throw new a(`operator ${g} is not supported`)}E+=R-1}P++;var W=e?b.tableDeltaS.decode(C):n(L,"IADS",S);if(null===W)break;E+=W+d}}return I}function b(e,t){var n={};n.number=(0,r.readUint32)(e,t);var i=e[t+4],s=63&i;if(!l[s])throw new a("invalid segment type: "+s);n.type=s,n.typeName=l[s],n.deferredNonRetain=!!(128&i);var o=!!(64&i),c=e[t+5],h=c>>5&7,f=[31&c],u=t+6;if(7===c){h=536870911&(0,r.readUint32)(e,u-1),u+=3;var d=h+7>>3;for(f[0]=e[u++];--d>0;)f.push(e[u++])}else if(5===c||6===c)throw new a("invalid referred-to flags");n.retainBits=f;let p=4;n.number<=256?p=1:n.number<=65536&&(p=2);var m,g,b=[];for(m=0;m<h;m++){let t;t=1===p?e[u]:2===p?(0,r.readUint16)(e,u):(0,r.readUint32)(e,u),b.push(t),u+=p}if(n.referredTo=b,o?(n.pageAssociation=(0,r.readUint32)(e,u),u+=4):n.pageAssociation=e[u++],n.length=(0,r.readUint32)(e,u),u+=4,4294967295===n.length){if(38!==s)throw new a("invalid unknown segment length");var v=y(e,u),w=!!(1&e[u+x]),C=new Uint8Array(6);for(w||(C[0]=255,C[1]=172),C[2]=v.height>>>24&255,C[3]=v.height>>16&255,C[4]=v.height>>8&255,C[5]=255&v.height,m=u,g=e.length;m<g;m++){for(var P=0;P<6&&C[P]===e[m+P];)P++;if(6===P){n.length=m+6;break}}if(4294967295===n.length)throw new a("segment end was not found")}return n.headerEnd=u,n}function v(e,t,n,i){for(var r=[],s=n;s<i;){var o=b(t,s);s=o.headerEnd;var a={header:o,data:t};if(e.randomAccess||(a.start=s,s+=o.length,a.end=s),r.push(a),51===o.type)break}if(e.randomAccess)for(var c=0,l=r.length;c<l;c++)r[c].start=s,s+=r[c].header.length,r[c].end=s;return r}function y(e,t){return{width:(0,r.readUint32)(e,t),height:(0,r.readUint32)(e,t+4),x:(0,r.readUint32)(e,t+8),y:(0,r.readUint32)(e,t+12),combinationOperator:7&e[t+16]}}var x=17;function w(e,t){var n,i,s,o,c=e.header,l=e.data,h=e.start,f=e.end;switch(c.type){case 0:var u={},d=(0,r.readUint16)(l,h);if(u.huffman=!!(1&d),u.refinement=!!(2&d),u.huffmanDHSelector=d>>2&3,u.huffmanDWSelector=d>>4&3,u.bitmapSizeSelector=d>>6&1,u.aggregationInstancesSelector=d>>7&1,u.bitmapCodingContextUsed=!!(256&d),u.bitmapCodingContextRetained=!!(512&d),u.template=d>>10&3,u.refinementTemplate=d>>12&1,h+=2,!u.huffman){for(o=0===u.template?4:1,i=[],s=0;s<o;s++)i.push({x:(0,r.readInt8)(l,h),y:(0,r.readInt8)(l,h+1)}),h+=2;u.at=i}if(u.refinement&&!u.refinementTemplate){for(i=[],s=0;s<2;s++)i.push({x:(0,r.readInt8)(l,h),y:(0,r.readInt8)(l,h+1)}),h+=2;u.refinementAt=i}u.numberOfExportedSymbols=(0,r.readUint32)(l,h),h+=4,u.numberOfNewSymbols=(0,r.readUint32)(l,h),h+=4,n=[u,c.number,c.referredTo,l,h,f];break;case 6:case 7:var p={};p.info=y(l,h),h+=x;var m=(0,r.readUint16)(l,h);if(h+=2,p.huffman=!!(1&m),p.refinement=!!(2&m),p.logStripSize=m>>2&3,p.stripSize=1<<p.logStripSize,p.referenceCorner=m>>4&3,p.transposed=!!(64&m),p.combinationOperator=m>>7&3,p.defaultPixelValue=m>>9&1,p.dsOffset=m<<17>>27,p.refinementTemplate=m>>15&1,p.huffman){var g=(0,r.readUint16)(l,h);h+=2,p.huffmanFS=3&g,p.huffmanDS=g>>2&3,p.huffmanDT=g>>4&3,p.huffmanRefinementDW=g>>6&3,p.huffmanRefinementDH=g>>8&3,p.huffmanRefinementDX=g>>10&3,p.huffmanRefinementDY=g>>12&3,p.huffmanRefinementSizeSelector=!!(16384&g)}if(p.refinement&&!p.refinementTemplate){for(i=[],s=0;s<2;s++)i.push({x:(0,r.readInt8)(l,h),y:(0,r.readInt8)(l,h+1)}),h+=2;p.refinementAt=i}p.numberOfSymbolInstances=(0,r.readUint32)(l,h),h+=4,n=[p,c.referredTo,l,h,f];break;case 16:const e={},t=l[h++];e.mmr=!!(1&t),e.template=t>>1&3,e.patternWidth=l[h++],e.patternHeight=l[h++],e.maxPatternIndex=(0,r.readUint32)(l,h),h+=4,n=[e,c.number,l,h,f];break;case 22:case 23:const P={};P.info=y(l,h),h+=x;const T=l[h++];P.mmr=!!(1&T),P.template=T>>1&3,P.enableSkip=!!(8&T),P.combinationOperator=T>>4&7,P.defaultPixelValue=T>>7&1,P.gridWidth=(0,r.readUint32)(l,h),h+=4,P.gridHeight=(0,r.readUint32)(l,h),h+=4,P.gridOffsetX=4294967295&(0,r.readUint32)(l,h),h+=4,P.gridOffsetY=4294967295&(0,r.readUint32)(l,h),h+=4,P.gridVectorX=(0,r.readUint16)(l,h),h+=2,P.gridVectorY=(0,r.readUint16)(l,h),h+=2,n=[P,c.referredTo,l,h,f];break;case 38:case 39:var b={};b.info=y(l,h),h+=x;var v=l[h++];if(b.mmr=!!(1&v),b.template=v>>1&3,b.prediction=!!(8&v),!b.mmr){for(o=0===b.template?4:1,i=[],s=0;s<o;s++)i.push({x:(0,r.readInt8)(l,h),y:(0,r.readInt8)(l,h+1)}),h+=2;b.at=i}n=[b,l,h,f];break;case 48:var w={width:(0,r.readUint32)(l,h),height:(0,r.readUint32)(l,h+4),resolutionX:(0,r.readUint32)(l,h+8),resolutionY:(0,r.readUint32)(l,h+12)};4294967295===w.height&&delete w.height;var C=l[h+16];(0,r.readUint16)(l,h+17),w.lossless=!!(1&C),w.refinement=!!(2&C),w.defaultPixelValue=C>>2&1,w.combinationOperator=C>>3&3,w.requiresBuffer=!!(32&C),w.combinationOperatorOverride=!!(64&C),n=[w];break;case 49:case 50:case 51:break;case 53:n=[c.number,l,h,f];break;case 62:break;default:throw new a(`segment type ${c.typeName}(${c.type})`+" is not implemented")}var P="on"+c.typeName;P in t&&t[P].apply(t,n)}function C(e,t){for(var n=0,i=e.length;n<i;n++)w(e[n],t)}function P(){}function T(e){2===e.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=e[0],this.rangeLength=0,this.prefixCode=e[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=e[0],this.prefixLength=e[1],this.rangeLength=e[2],this.prefixCode=e[3],this.isLowerRange="lower"===e[4])}function I(e){this.children=[],e?(this.isLeaf=!0,this.rangeLength=e.rangeLength,this.rangeLow=e.rangeLow,this.isLowerRange=e.isLowerRange,this.isOOB=e.isOOB):this.isLeaf=!1}function k(e,t){t||this.assignPrefixCodes(e),this.rootNode=new I(null);for(let t=0,n=e.length;t<n;t++){const n=e[t];n.prefixLength>0&&this.rootNode.buildTree(n,n.prefixLength-1)}}P.prototype={onPageInformation:function(e){this.currentPageInfo=e;var t=e.width+7>>3,n=new Uint8ClampedArray(t*e.height);if(e.defaultPixelValue)for(var i=0,r=n.length;i<r;i++)n[i]=255;this.buffer=n},drawBitmap:function(e,t){var n,i,r,s,o=this.currentPageInfo,c=e.width,l=e.height,h=o.width+7>>3,f=o.combinationOperatorOverride?e.combinationOperator:o.combinationOperator,u=this.buffer,d=128>>(7&e.x),p=e.y*h+(e.x>>3);switch(f){case 0:for(n=0;n<l;n++){for(r=d,s=p,i=0;i<c;i++)t[n][i]&&(u[s]|=r),(r>>=1)||(r=128,s++);p+=h}break;case 2:for(n=0;n<l;n++){for(r=d,s=p,i=0;i<c;i++)t[n][i]&&(u[s]^=r),(r>>=1)||(r=128,s++);p+=h}break;default:throw new a(`operator ${f} is not supported`)}},onImmediateGenericRegion:function(e,n,i,r){var s=e.info,o=new t(n,i,r),a=p(e.mmr,s.width,s.height,e.template,e.prediction,null,e.at,o);this.drawBitmap(s,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(e,i,s,o,l,h){let f,u;e.huffman&&(f=function(e,t,n){let i,r,s,o,c=0;switch(e.huffmanDHSelector){case 0:case 1:i=L(e.huffmanDHSelector+4);break;case 3:i=A(c,t,n),c++;break;default:throw new a("invalid Huffman DH selector")}switch(e.huffmanDWSelector){case 0:case 1:r=L(e.huffmanDWSelector+2);break;case 3:r=A(c,t,n),c++;break;default:throw new a("invalid Huffman DW selector")}e.bitmapSizeSelector?(s=A(c,t,n),c++):s=L(1);o=e.aggregationInstancesSelector?A(c,t,n):L(1);return{tableDeltaHeight:i,tableDeltaWidth:r,tableBitmapSize:s,tableAggregateInstances:o}}(e,s,this.customTables),u=new O(o,l,h));var d=this.symbols;d||(this.symbols=d={});for(var b=[],v=0,y=s.length;v<y;v++){const e=d[s[v]];e&&(b=b.concat(e))}var x=new t(o,l,h);d[i]=function(e,t,i,s,o,l,h,f,u,d,b,v){if(e&&t)throw new a("symbol refinement with Huffman is not supported");var y=[],x=0,w=(0,r.log2)(i.length+s),C=b.decoder,P=b.contextCache;let T,I;for(e&&(T=L(1),I=[],w=Math.max(w,1));y.length<s;){x+=e?l.tableDeltaHeight.decode(v):n(P,"IADH",C);let r=0,s=0;const o=e?I.length:0;for(;;){var k,S=e?l.tableDeltaWidth.decode(v):n(P,"IADW",C);if(null===S)break;if(r+=S,s+=r,t){var O=n(P,"IAAI",C);if(O>1)k=g(e,t,r,x,0,O,1,i.concat(y),w,0,0,1,0,l,u,d,b,0,v);else{var A=c(P,C,w),M=n(P,"IARDX",C),B=n(P,"IARDY",C);k=m(r,x,u,A<i.length?i[A]:y[A-i.length],M,B,!1,d,b)}y.push(k)}else e?I.push(r):(k=p(!1,r,x,h,!1,null,f,b),y.push(k))}if(e&&!t){const e=l.tableBitmapSize.decode(v);let t;if(v.byteAlign(),0===e)t=E(v,s,x);else{const n=v.end,i=v.position+e;v.end=i,t=D(v,s,x,!1),v.end=n,v.position=i}const n=I.length;if(o===n-1)y.push(t);else{let e,i,r,s,a,c=0;for(e=o;e<n;e++){for(s=I[e],r=c+s,a=[],i=0;i<x;i++)a.push(t[i].subarray(c,r));y.push(a),c=r}}}}for(var U=[],R=[],_=!1,F=i.length+s;R.length<F;){for(var N=e?T.decode(v):n(P,"IAEX",C);N--;)R.push(_);_=!_}for(var z=0,H=i.length;z<H;z++)R[z]&&U.push(i[z]);for(var X=0;X<s;z++,X++)R[z]&&U.push(y[X]);return U}(e.huffman,e.refinement,b,e.numberOfNewSymbols,e.numberOfExportedSymbols,f,e.template,e.at,e.refinementTemplate,e.refinementAt,x,u)},onImmediateTextRegion:function(e,n,i,s,o){var c=e.info;let l,h;for(var f=this.symbols,u=[],d=0,p=n.length;d<p;d++){const e=f[n[d]];e&&(u=u.concat(e))}var m=(0,r.log2)(u.length);e.huffman&&(h=new O(i,s,o),l=function(e,t,n,i,r){const s=[];for(let e=0;e<=34;e++){const t=r.readBits(4);s.push(new T([e,t,0,0]))}const o=new k(s,!1);s.length=0;for(let e=0;e<i;){const t=o.decode(r);if(t>=32){let n,i,o;switch(t){case 32:if(0===e)throw new a("no previous value in symbol ID table");i=r.readBits(2)+3,n=s[e-1].prefixLength;break;case 33:i=r.readBits(3)+3,n=0;break;case 34:i=r.readBits(7)+11,n=0;break;default:throw new a("invalid code length in symbol ID table")}for(o=0;o<i;o++)s.push(new T([e,n,0,0])),e++}else s.push(new T([e,t,0,0])),e++}r.byteAlign();const c=new k(s,!1);let l,h,f,u=0;switch(e.huffmanFS){case 0:case 1:l=L(e.huffmanFS+6);break;case 3:l=A(u,t,n),u++;break;default:throw new a("invalid Huffman FS selector")}switch(e.huffmanDS){case 0:case 1:case 2:h=L(e.huffmanDS+8);break;case 3:h=A(u,t,n),u++;break;default:throw new a("invalid Huffman DS selector")}switch(e.huffmanDT){case 0:case 1:case 2:f=L(e.huffmanDT+11);break;case 3:f=A(u,t,n),u++;break;default:throw new a("invalid Huffman DT selector")}if(e.refinement)throw new a("refinement with Huffman is not supported");return{symbolIDTable:c,tableFirstS:l,tableDeltaS:h,tableDeltaT:f}}(e,n,this.customTables,u.length,h));var b=new t(i,s,o),v=g(e.huffman,e.refinement,c.width,c.height,e.defaultPixelValue,e.numberOfSymbolInstances,e.stripSize,u,m,e.transposed,e.dsOffset,e.referenceCorner,e.combinationOperator,l,e.refinementTemplate,e.refinementAt,b,e.logStripSize,h);this.drawBitmap(c,v)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)},onPatternDictionary(e,n,i,r,s){let o=this.patterns;o||(this.patterns=o={});const a=new t(i,r,s);o[n]=function(e,t,n,i,r,s){const o=[];e||(o.push({x:-t,y:0}),0===r&&(o.push({x:-3,y:-1}),o.push({x:2,y:-2}),o.push({x:-2,y:-2})));const a=p(e,(i+1)*t,n,r,!1,null,o,s),c=[];for(let e=0;e<=i;e++){const i=[],r=t*e,s=r+t;for(let e=0;e<n;e++)i.push(a[e].subarray(r,s));c.push(i)}return c}(e.mmr,e.patternWidth,e.patternHeight,e.maxPatternIndex,e.template,a)},onImmediateHalftoneRegion(e,n,i,s,o){const c=this.patterns[n[0]],l=e.info,h=new t(i,s,o),f=function(e,t,n,i,s,o,c,l,h,f,u,d,m,g,b){if(c)throw new a("skip is not supported");if(0!==l)throw new a("operator "+l+" is not supported in halftone region");const v=[];let y,x,w;for(y=0;y<s;y++){if(w=new Uint8Array(i),o)for(x=0;x<i;x++)w[x]=o;v.push(w)}const C=t.length,P=t[0],T=P[0].length,I=P.length,k=(0,r.log2)(C),S=[];e||(S.push({x:n<=1?3:2,y:-1}),0===n&&(S.push({x:-3,y:-1}),S.push({x:2,y:-2}),S.push({x:-2,y:-2})));const L=[];let A,E,M,B,U,R,_,F,N,z,H;for(e&&(A=new O(b.data,b.start,b.end)),y=k-1;y>=0;y--)E=e?D(A,h,f,!0):p(!1,h,f,n,!1,null,S,b),L[y]=E;for(M=0;M<f;M++)for(B=0;B<h;B++){for(U=0,R=0,x=k-1;x>=0;x--)U=L[x][M][B]^U,R|=U<<x;if(_=t[R],F=u+M*g+B*m>>8,N=d+M*m-B*g>>8,F>=0&&F+T<=i&&N>=0&&N+I<=s)for(y=0;y<I;y++)for(H=v[N+y],z=_[y],x=0;x<T;x++)H[F+x]|=z[x];else{let e,t;for(y=0;y<I;y++)if(t=N+y,!(t<0||t>=s))for(H=v[t],z=_[y],x=0;x<T;x++)e=F+x,e>=0&&e<i&&(H[e]|=z[x])}}return v}(e.mmr,c,e.template,l.width,l.height,e.defaultPixelValue,e.enableSkip,e.combinationOperator,e.gridWidth,e.gridHeight,e.gridOffsetX,e.gridOffsetY,e.gridVectorX,e.gridVectorY,h);this.drawBitmap(l,f)},onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion.apply(this,arguments)},onTables(e,t,n,i){let s=this.customTables;s||(this.customTables=s={}),s[e]=function(e,t,n){const i=e[t],s=4294967295&(0,r.readUint32)(e,t+1),o=4294967295&(0,r.readUint32)(e,t+5),a=new O(e,t+9,n),c=1+(i>>1&7),l=1+(i>>4&7),h=[];let f,u,d=s;do{f=a.readBits(c),u=a.readBits(l),h.push(new T([d,f,u,0])),d+=1<<u}while(d<o);f=a.readBits(c),h.push(new T([s-1,f,32,0,"lower"])),f=a.readBits(c),h.push(new T([o,f,32,0])),1&i&&(f=a.readBits(c),h.push(new T([f,0])));return new k(h,!1)}(t,n,i)}},I.prototype={buildTree(e,t){const n=e.prefixCode>>t&1;if(t<=0)this.children[n]=new I(e);else{let i=this.children[n];i||(this.children[n]=i=new I(null)),i.buildTree(e,t-1)}},decodeNode(e){if(this.isLeaf){if(this.isOOB)return null;const t=e.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-t:t)}const t=this.children[e.readBit()];if(!t)throw new a("invalid Huffman data");return t.decodeNode(e)}},k.prototype={decode(e){return this.rootNode.decodeNode(e)},assignPrefixCodes(e){const t=e.length;let n=0;for(let i=0;i<t;i++)n=Math.max(n,e[i].prefixLength);const i=new Uint32Array(n+1);for(let n=0;n<t;n++)i[e[n].prefixLength]++;let r,s,o,a=1,c=0;for(i[0]=0;a<=n;){for(c=c+i[a-1]<<1,r=c,s=0;s<t;)o=e[s],o.prefixLength===a&&(o.prefixCode=r,r++),s++;a++}}};const S={};function L(e){let t,n=S[e];if(n)return n;switch(e){case 1:t=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:t=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:t=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:t=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:t=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:t=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:t=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:t=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:t=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:t=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:t=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:t=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:t=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:t=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:t=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new a(`standard table B.${e} does not exist`)}for(let e=0,n=t.length;e<n;e++)t[e]=new T(t[e]);return n=new k(t,!0),S[e]=n,n}function O(e,t,n){this.data=e,this.start=t,this.end=n,this.position=t,this.shift=-1,this.currentByte=0}function A(e,t,n){let i=0;for(let r=0,s=t.length;r<s;r++){const s=n[t[r]];if(s){if(e===i)return s;i++}}throw new a("can't find custom Huffman table")}function E(e,t,n){const i=[];for(let r=0;r<n;r++){const n=new Uint8Array(t);i.push(n);for(let i=0;i<t;i++)n[i]=e.readBit();e.byteAlign()}return i}function D(e,t,n,i){const r={K:-1,Columns:t,Rows:n,BlackIs1:!0,EndOfBlock:i},s=new o.CCITTFaxDecoder(e,r),a=[];let c,l=!1;for(let e=0;e<n;e++){const e=new Uint8Array(t);a.push(e);let n=-1;for(let i=0;i<t;i++)n<0&&(c=s.readNextChar(),-1===c&&(c=0,l=!0),n=7),e[i]=c>>n&1,n--}if(i&&!l){const e=5;for(let t=0;t<e&&-1!==s.readNextChar();t++);}return a}function M(){}return O.prototype={readBit(){if(this.shift<0){if(this.position>=this.end)throw new a("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const e=this.currentByte>>this.shift&1;return this.shift--,e},readBits(e){let t,n=0;for(t=e-1;t>=0;t--)n|=this.readBit()<<t;return n},byteAlign(){this.shift=-1},next(){return this.position>=this.end?-1:this.data[this.position++]}},M.prototype={parseChunks:e=>function(e){for(var t=new P,n=0,i=e.length;n<i;n++){var r=e[n];C(v({},r.data,r.start,r.end),t)}return t.buffer}(e),parse(e){const{imgData:t,width:n,height:i}=function(e){const t=e.length;let n=0;if(151!==e[n]||74!==e[n+1]||66!==e[n+2]||50!==e[n+3]||13!==e[n+4]||10!==e[n+5]||26!==e[n+6]||10!==e[n+7])throw new a("parseJbig2 - invalid header.");const i=Object.create(null);n+=8;const s=e[n++];i.randomAccess=!(1&s),2&s||(i.numberOfPages=(0,r.readUint32)(e,n),n+=4);const o=v(i,e,n,t),c=new P;C(o,c);const{width:l,height:h}=c.currentPageInfo,f=c.buffer,u=new Uint8ClampedArray(l*h);let d=0,p=0;for(let e=0;e<h;e++){let e,t=0;for(let n=0;n<l;n++)t||(t=128,e=f[p++]),u[d++]=e&t?0:255,t>>=1}return{imgData:u,width:l,height:h}}(e);return this.width=n,this.height=i,t}},M}();t.Jbig2Image=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLookupTableFactory=function(e){let t;return function(){return e&&(t=Object.create(null),e(t),e=null),t}},t.getInheritableProperty=function({dict:e,key:t,getArray:n=!1,stopWhenFound:r=!0}){let s,o=0;for(;e;){const a=n?e.getArray(t):e.get(t);if(void 0!==a){if(r)return a;s||(s=[]),s.push(a)}if(++o>100){(0,i.warn)(`getInheritableProperty: maximum loop count exceeded for "${t}"`);break}e=e.get("Parent")}return s},t.toRomanNumerals=function(e,t=!1){(0,i.assert)(Number.isInteger(e)&&e>0,"The number should be a positive integer.");const n=[];let r;for(;e>=1e3;)e-=1e3,n.push("M");r=e/100|0,e%=100,n.push(a[r]),r=e/10|0,e%=10,n.push(a[10+r]),n.push(a[20+e]);const s=n.join("");return t?s.toLowerCase():s},t.log2=function(e){if(e<=0)return 0;return Math.ceil(Math.log2(e))},t.readInt8=function(e,t){return e[t]<<24>>24},t.readUint16=function(e,t){return e[t]<<8|e[t+1]},t.readUint32=function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0},t.isWhiteSpace=function(e){return 32===e||9===e||13===e||10===e},t.XRefParseException=t.XRefEntryException=t.MissingDataException=void 0;var i=n(1);class r extends i.BaseException{constructor(e,t){super(`Missing data [${e}, ${t})`),this.begin=e,this.end=t}}t.MissingDataException=r;class s extends i.BaseException{}t.XRefEntryException=s;class o extends i.BaseException{}t.XRefParseException=o;const a=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArithmeticDecoder=void 0;const i=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];t.ArithmeticDecoder=class{constructor(e,t,n){this.data=e,this.bp=t,this.dataEnd=n,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const e=this.data;let t=this.bp;255===e[t]?e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t):(t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(e,t){let n=e[t]>>1,r=1&e[t];const s=i[n],o=s.qe;let a,c=this.a-o;if(this.chigh<o)c<o?(c=o,a=r,n=s.nmps):(c=o,a=1^r,1===s.switchFlag&&(r=a),n=s.nlps);else{if(this.chigh-=o,0!=(32768&c))return this.a=c,r;c<o?(a=1^r,1===s.switchFlag&&(r=a),n=s.nlps):(a=r,n=s.nmps)}do{0===this.ct&&this.byteIn(),c<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&c));return this.a=c,e[t]=n<<1|r,a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CCITTFaxDecoder=void 0;var i=n(1);const r=function(){const e=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],t=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],n=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],r=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],s=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],o=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];function a(e,t={}){if(!e||"function"!=typeof e.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');this.source=e,this.eof=!1,this.encoding=t.K||0,this.eoline=t.EndOfLine||!1,this.byteAlign=t.EncodedByteAlign||!1,this.columns=t.Columns||1728,this.rows=t.Rows||0;let n,i=t.EndOfBlock;for(null==i&&(i=!0),this.eoblock=i,this.black=t.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(n=this._lookBits(12));)this._eatBits(1);1===n&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}return a.prototype={readNextChar(){if(this.eof)return-1;const e=this.refLine,t=this.codingLine,n=this.columns;let r,s,o,a,c;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let o,c,l;if(this.err=!1,this.nextLine2D){for(a=0;t[a]<n;++a)e[a]=t[a];for(e[a++]=n,e[a]=n,t[0]=0,this.codingPos=0,r=0,s=0;t[this.codingPos]<n;)switch(o=this._getTwoDimCode(),o){case 0:this._addPixels(e[r+1],s),e[r+1]<n&&(r+=2);break;case 1:if(o=c=0,s){do{o+=l=this._getBlackCode()}while(l>=64);do{c+=l=this._getWhiteCode()}while(l>=64)}else{do{o+=l=this._getWhiteCode()}while(l>=64);do{c+=l=this._getBlackCode()}while(l>=64)}for(this._addPixels(t[this.codingPos]+o,s),t[this.codingPos]<n&&this._addPixels(t[this.codingPos]+c,1^s);e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 7:if(this._addPixels(e[r]+3,s),s^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 5:if(this._addPixels(e[r]+2,s),s^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 3:if(this._addPixels(e[r]+1,s),s^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 2:if(this._addPixels(e[r],s),s^=1,t[this.codingPos]<n)for(++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 8:if(this._addPixelsNeg(e[r]-3,s),s^=1,t[this.codingPos]<n)for(r>0?--r:++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 6:if(this._addPixelsNeg(e[r]-2,s),s^=1,t[this.codingPos]<n)for(r>0?--r:++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case 4:if(this._addPixelsNeg(e[r]-1,s),s^=1,t[this.codingPos]<n)for(r>0?--r:++r;e[r]<=t[this.codingPos]&&e[r]<n;)r+=2;break;case-1:this._addPixels(n,0),this.eof=!0;break;default:(0,i.info)("bad 2d code"),this._addPixels(n,0),this.err=!0}}else for(t[0]=0,this.codingPos=0,s=0;t[this.codingPos]<n;){if(o=0,s)do{o+=l=this._getBlackCode()}while(l>=64);else do{o+=l=this._getWhiteCode()}while(l>=64);this._addPixels(t[this.codingPos]+o,s),s^=1}let h=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(o=this._lookBits(12),this.eoline)for(;-1!==o&&1!==o;)this._eatBits(1),o=this._lookBits(12);else for(;0===o;)this._eatBits(1),o=this._lookBits(12);1===o?(this._eatBits(12),h=!0):-1===o&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&h&&this.byteAlign){if(o=this._lookBits(12),1===o){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(a=0;a<4;++a)o=this._lookBits(12),1!==o&&(0,i.info)("bad rtc code: "+o),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(o=this._lookBits(13),-1===o)return this.eof=!0,-1;if(o>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&o))}t[0]>0?this.outputBits=t[this.codingPos=0]:this.outputBits=t[this.codingPos=1],this.row++}if(this.outputBits>=8)c=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&t[this.codingPos]<n&&(this.codingPos++,this.outputBits=t[this.codingPos]-t[this.codingPos-1]);else{o=8,c=0;do{this.outputBits>o?(c<<=o,1&this.codingPos||(c|=255>>8-o),this.outputBits-=o,o=0):(c<<=this.outputBits,1&this.codingPos||(c|=255>>8-this.outputBits),o-=this.outputBits,this.outputBits=0,t[this.codingPos]<n?(this.codingPos++,this.outputBits=t[this.codingPos]-t[this.codingPos-1]):o>0&&(c<<=o,o=0))}while(o)}return this.black&&(c^=255),c},_addPixels(e,t){const n=this.codingLine;let r=this.codingPos;e>n[r]&&(e>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,e=this.columns),1&r^t&&++r,n[r]=e),this.codingPos=r},_addPixelsNeg(e,t){const n=this.codingLine;let r=this.codingPos;if(e>n[r])e>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,e=this.columns),1&r^t&&++r,n[r]=e;else if(e<n[r]){for(e<0&&((0,i.info)("invalid code"),this.err=!0,e=0);r>0&&e<n[r-1];)--r;n[r]=e}this.codingPos=r},_findTableCode(e,t,n,i){const r=i||0;for(let i=e;i<=t;++i){let e=this._lookBits(i);if(-1===e)return[!0,1,!1];if(i<t&&(e<<=t-i),!r||e>=r){const t=n[e-r];if(t[0]===i)return this._eatBits(i),[!0,t[1],!0]}}return[!1,0,!1]},_getTwoDimCode(){let t,n=0;if(this.eoblock){if(n=this._lookBits(7),t=e[n],t&&t[0]>0)return this._eatBits(t[0]),t[1]}else{const t=this._findTableCode(1,7,e);if(t[0]&&t[2])return t[1]}return(0,i.info)("Bad two dim code"),-1},_getWhiteCode(){let e,r=0;if(this.eoblock){if(r=this._lookBits(12),-1===r)return 1;if(e=r>>5==0?t[r]:n[r>>3],e[0]>0)return this._eatBits(e[0]),e[1]}else{let e=this._findTableCode(1,9,n);if(e[0])return e[1];if(e=this._findTableCode(11,12,t),e[0])return e[1]}return(0,i.info)("bad white code"),this._eatBits(1),1},_getBlackCode(){let e,t;if(this.eoblock){if(e=this._lookBits(13),-1===e)return 1;if(t=e>>7==0?r[e]:e>>9==0&&e>>7!=0?s[(e>>1)-64]:o[e>>7],t[0]>0)return this._eatBits(t[0]),t[1]}else{let e=this._findTableCode(2,6,o);if(e[0])return e[1];if(e=this._findTableCode(7,12,s,64),e[0])return e[1];if(e=this._findTableCode(10,13,r),e[0])return e[1]}return(0,i.info)("bad black code"),this._eatBits(1),1},_lookBits(e){let t;for(;this.inputBits<e;){if(-1===(t=this.source.next()))return 0===this.inputBits?-1:this.inputBuf<<e-this.inputBits&65535>>16-e;this.inputBuf=this.inputBuf<<8|t,this.inputBits+=8}return this.inputBuf>>this.inputBits-e&65535>>16-e},_eatBits(e){(this.inputBits-=e)<0&&(this.inputBits=0)}},a}();t.CCITTFaxDecoder=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JpegImage=void 0;var i=n(1),r=n(4);class s extends i.BaseException{constructor(e){super(`JPEG error: ${e}`)}}class o extends i.BaseException{constructor(e,t){super(e),this.scanLines=t}}class a extends i.BaseException{}var c=function(){var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function t({decodeTransform:e=null,colorTransform:t=-1}={}){this._decodeTransform=e,this._colorTransform=t}function n(e,t){for(var n,i,r=0,s=[],o=16;o>0&&!e[o-1];)o--;s.push({children:[],index:0});var a,c=s[0];for(n=0;n<o;n++){for(i=0;i<e[n];i++){for((c=s.pop()).children[c.index]=t[r];c.index>0;)c=s.pop();for(c.index++,s.push(c);s.length<=n;)s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a;r++}n+1<o&&(s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a)}return s[0].children}function c(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function l(t,n,l,h,f,d,p,m,g,b=!1){var v=l.mcusPerLine,y=l.progressive,x=n,w=0,C=0;function P(){if(C>0)return C--,w>>C&1;if(255===(w=t[n++])){var e=t[n++];if(e){if(220===e&&b){n+=2;const e=(0,r.readUint16)(t,n);if(n+=2,e>0&&e!==l.scanLines)throw new o("Found DNL marker (0xFFDC) while parsing scan data",e)}else if(217===e){if(b){const e=8*A;if(e>0&&e<l.scanLines/10)throw new o("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",e)}throw new a("Found EOI marker (0xFFD9) while parsing scan data")}throw new s(`unexpected marker ${(w<<8|e).toString(16)}`)}}return C=7,w>>>7}function T(e){for(var t=e;;){switch(typeof(t=t[P()])){case"number":return t;case"object":continue}throw new s("invalid huffman sequence")}}function I(e){for(var t=0;e>0;)t=t<<1|P(),e--;return t}function k(e){if(1===e)return 1===P()?1:-1;var t=I(e);return t>=1<<e-1?t:t+(-1<<e)+1}var S=0;var L,O=0;let A=0;function E(e,t,n,i,r){var s=n%v;A=(n/v|0)*e.v+i;var o=s*e.h+r;t(e,c(e,A,o))}function D(e,t,n){A=n/e.blocksPerLine|0;var i=n%e.blocksPerLine;t(e,c(e,A,i))}var M,B,U,R,_,F,N=h.length;F=y?0===d?0===m?function(e,t){var n=T(e.huffmanTableDC),i=0===n?0:k(n)<<g;e.blockData[t]=e.pred+=i}:function(e,t){e.blockData[t]|=P()<<g}:0===m?function(t,n){if(S>0)S--;else for(var i=d,r=p;i<=r;){var s=T(t.huffmanTableAC),o=15&s,a=s>>4;if(0!==o){var c=e[i+=a];t.blockData[n+c]=k(o)*(1<<g),i++}else{if(a<15){S=I(a)+(1<<a)-1;break}i+=16}}}:function(t,n){for(var i,r,o=d,a=p,c=0;o<=a;){const a=n+e[o],l=t.blockData[a]<0?-1:1;switch(O){case 0:if(c=(r=T(t.huffmanTableAC))>>4,0===(i=15&r))c<15?(S=I(c)+(1<<c),O=4):(c=16,O=1);else{if(1!==i)throw new s("invalid ACn encoding");L=k(i),O=c?2:3}continue;case 1:case 2:t.blockData[a]?t.blockData[a]+=l*(P()<<g):0===--c&&(O=2===O?3:0);break;case 3:t.blockData[a]?t.blockData[a]+=l*(P()<<g):(t.blockData[a]=L<<g,O=0);break;case 4:t.blockData[a]&&(t.blockData[a]+=l*(P()<<g))}o++}4===O&&0===--S&&(O=0)}:function(t,n){var i=T(t.huffmanTableDC),r=0===i?0:k(i);t.blockData[n]=t.pred+=r;for(var s=1;s<64;){var o=T(t.huffmanTableAC),a=15&o,c=o>>4;if(0!==a){var l=e[s+=c];t.blockData[n+l]=k(a),s++}else{if(c<15)break;s+=16}}};var z,H,X,Y,q=0;for(H=1===N?h[0].blocksPerLine*h[0].blocksPerColumn:v*l.mcusPerColumn;q<H;){var j=f?Math.min(H-q,f):H;for(B=0;B<N;B++)h[B].pred=0;if(S=0,1===N)for(M=h[0],_=0;_<j;_++)D(M,F,q),q++;else for(_=0;_<j;_++){for(B=0;B<N;B++)for(X=(M=h[B]).h,Y=M.v,U=0;U<Y;U++)for(R=0;R<X;R++)E(M,F,q,U,R);q++}if(C=0,!(z=u(t,n)))break;z.invalid&&((0,i.warn)("decodeScan - unexpected MCU data, current marker is: "+z.invalid),n=z.offset);var W=z&&z.marker;if(!W||W<=65280)throw new s("decodeScan - a valid marker was not found.");if(!(W>=65488&&W<=65495))break;n+=2}return(z=u(t,n))&&z.invalid&&((0,i.warn)("decodeScan - unexpected Scan data, current marker is: "+z.invalid),n=z.offset),n-x}function h(e,t,n){var i,r,o,a,c,l,h,f,u,d,p,m,g,b,v,y,x,w=e.quantizationTable,C=e.blockData;if(!w)throw new s("missing required Quantization Table.");for(var P=0;P<64;P+=8)u=C[t+P],d=C[t+P+1],p=C[t+P+2],m=C[t+P+3],g=C[t+P+4],b=C[t+P+5],v=C[t+P+6],y=C[t+P+7],u*=w[P],0!=(d|p|m|g|b|v|y)?(d*=w[P+1],p*=w[P+2],m*=w[P+3],g*=w[P+4],b*=w[P+5],r=(i=(i=5793*u+128>>8)+(r=5793*g+128>>8)+1>>1)-r,x=3784*(o=p)+1567*(a=v*=w[P+6])+128>>8,o=1567*o-3784*a+128>>8,h=(c=(c=2896*(d-(y*=w[P+7]))+128>>8)+(h=b<<4)+1>>1)-h,l=(f=(f=2896*(d+y)+128>>8)+(l=m<<4)+1>>1)-l,a=(i=i+(a=x)+1>>1)-a,o=(r=r+o+1>>1)-o,x=2276*c+3406*f+2048>>12,c=3406*c-2276*f+2048>>12,f=x,x=799*l+4017*h+2048>>12,l=4017*l-799*h+2048>>12,h=x,n[P]=i+f,n[P+7]=i-f,n[P+1]=r+h,n[P+6]=r-h,n[P+2]=o+l,n[P+5]=o-l,n[P+3]=a+c,n[P+4]=a-c):(x=5793*u+512>>10,n[P]=x,n[P+1]=x,n[P+2]=x,n[P+3]=x,n[P+4]=x,n[P+5]=x,n[P+6]=x,n[P+7]=x);for(var T=0;T<8;++T)u=n[T],0!=((d=n[T+8])|(p=n[T+16])|(m=n[T+24])|(g=n[T+32])|(b=n[T+40])|(v=n[T+48])|(y=n[T+56]))?(r=(i=4112+((i=5793*u+2048>>12)+(r=5793*g+2048>>12)+1>>1))-r,x=3784*(o=p)+1567*(a=v)+2048>>12,o=1567*o-3784*a+2048>>12,a=x,h=(c=(c=2896*(d-y)+2048>>12)+(h=b)+1>>1)-h,l=(f=(f=2896*(d+y)+2048>>12)+(l=m)+1>>1)-l,x=2276*c+3406*f+2048>>12,c=3406*c-2276*f+2048>>12,f=x,x=799*l+4017*h+2048>>12,l=4017*l-799*h+2048>>12,(u=(i=i+a+1>>1)+f)<16?u=0:u>=4080?u=255:u>>=4,(d=(r=r+o+1>>1)+(h=x))<16?d=0:d>=4080?d=255:d>>=4,(p=(o=r-o)+l)<16?p=0:p>=4080?p=255:p>>=4,(m=(a=i-a)+c)<16?m=0:m>=4080?m=255:m>>=4,(g=a-c)<16?g=0:g>=4080?g=255:g>>=4,(b=o-l)<16?b=0:b>=4080?b=255:b>>=4,(v=r-h)<16?v=0:v>=4080?v=255:v>>=4,(y=i-f)<16?y=0:y>=4080?y=255:y>>=4,C[t+T]=u,C[t+T+8]=d,C[t+T+16]=p,C[t+T+24]=m,C[t+T+32]=g,C[t+T+40]=b,C[t+T+48]=v,C[t+T+56]=y):(x=(x=5793*u+8192>>14)<-2040?0:x>=2024?255:x+2056>>4,C[t+T]=x,C[t+T+8]=x,C[t+T+16]=x,C[t+T+24]=x,C[t+T+32]=x,C[t+T+40]=x,C[t+T+48]=x,C[t+T+56]=x)}function f(e,t){for(var n=t.blocksPerLine,i=t.blocksPerColumn,r=new Int16Array(64),s=0;s<i;s++)for(var o=0;o<n;o++){h(t,c(t,s,o),r)}return t.blockData}function u(e,t,n=t){const i=e.length-1;var s=n<t?n:t;if(t>=i)return null;var o=(0,r.readUint16)(e,t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};for(var a=(0,r.readUint16)(e,s);!(a>=65472&&a<=65534);){if(++s>=i)return null;a=(0,r.readUint16)(e,s)}return{invalid:o.toString(16),marker:a,offset:s}}return t.prototype={parse(t,{dnlScanLines:c=null}={}){function h(){const e=(0,r.readUint16)(t,g);let n=(g+=2)+e-2;var s=u(t,n,g);s&&s.invalid&&((0,i.warn)("readDataBlock - incorrect length, current marker is: "+s.invalid),n=s.offset);var o=t.subarray(g,n);return g+=o.length,o}function d(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV),i=0;i<e.components.length;i++){X=e.components[i];var r=Math.ceil(Math.ceil(e.samplesPerLine/8)*X.h/e.maxH),s=Math.ceil(Math.ceil(e.scanLines/8)*X.v/e.maxV),o=t*X.h,a=64*(n*X.v)*(o+1);X.blockData=new Int16Array(a),X.blocksPerLine=r,X.blocksPerColumn=s}e.mcusPerLine=t,e.mcusPerColumn=n}var p,m,g=0,b=null,v=null;let y=0;var x=[],w=[],C=[];let P=(0,r.readUint16)(t,g);if(g+=2,65496!==P)throw new s("SOI not found");P=(0,r.readUint16)(t,g),g+=2;e:for(;65497!==P;){var T,I,k;switch(P){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var S=h();65504===P&&74===S[0]&&70===S[1]&&73===S[2]&&70===S[3]&&0===S[4]&&(b={version:{major:S[5],minor:S[6]},densityUnits:S[7],xDensity:S[8]<<8|S[9],yDensity:S[10]<<8|S[11],thumbWidth:S[12],thumbHeight:S[13],thumbData:S.subarray(14,14+3*S[12]*S[13])}),65518===P&&65===S[0]&&100===S[1]&&111===S[2]&&98===S[3]&&101===S[4]&&(v={version:S[5]<<8|S[6],flags0:S[7]<<8|S[8],flags1:S[9]<<8|S[10],transformCode:S[11]});break;case 65499:for(var L=(0,r.readUint16)(t,g)+(g+=2)-2;g<L;){var O=t[g++],A=new Uint16Array(64);if(O>>4==0)for(I=0;I<64;I++)A[e[I]]=t[g++];else{if(O>>4!=1)throw new s("DQT - invalid table spec");for(I=0;I<64;I++)A[e[I]]=(0,r.readUint16)(t,g),g+=2}x[15&O]=A}break;case 65472:case 65473:case 65474:if(p)throw new s("Only single frame JPEGs supported");g+=2,(p={}).extended=65473===P,p.progressive=65474===P,p.precision=t[g++];const f=(0,r.readUint16)(t,g);g+=2,p.scanLines=c||f,p.samplesPerLine=(0,r.readUint16)(t,g),g+=2,p.components=[],p.componentIds={};var E,D=t[g++],M=0,B=0;for(T=0;T<D;T++){E=t[g];var U=t[g+1]>>4,R=15&t[g+1];M<U&&(M=U),B<R&&(B=R);var _=t[g+2];k=p.components.push({h:U,v:R,quantizationId:_,quantizationTable:null}),p.componentIds[E]=k-1,g+=3}p.maxH=M,p.maxV=B,d(p);break;case 65476:const Q=(0,r.readUint16)(t,g);for(g+=2,T=2;T<Q;){var F=t[g++],N=new Uint8Array(16),z=0;for(I=0;I<16;I++,g++)z+=N[I]=t[g];var H=new Uint8Array(z);for(I=0;I<z;I++,g++)H[I]=t[g];T+=17+z,(F>>4==0?C:w)[15&F]=n(N,H)}break;case 65501:g+=2,m=(0,r.readUint16)(t,g),g+=2;break;case 65498:const Z=1==++y&&!c;g+=2;var X,Y=t[g++],q=[];for(T=0;T<Y;T++){var j=p.componentIds[t[g++]];X=p.components[j];var W=t[g++];X.huffmanTableDC=C[W>>4],X.huffmanTableAC=w[15&W],q.push(X)}var G=t[g++],V=t[g++],J=t[g++];try{var K=l(t,g,p,q,m,G,V,J>>4,15&J,Z);g+=K}catch(e){if(e instanceof o)return(0,i.warn)(`${e.message} -- attempting to re-parse the JPEG image.`),this.parse(t,{dnlScanLines:e.scanLines});if(e instanceof a){(0,i.warn)(`${e.message} -- ignoring the rest of the image data.`);break e}throw e}break;case 65500:g+=4;break;case 65535:255!==t[g]&&g--;break;default:const $=u(t,g-2,g-3);if($&&$.invalid){(0,i.warn)("JpegImage.parse - unexpected data, current marker is: "+$.invalid),g=$.offset;break}if(g>=t.length-1){(0,i.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break e}throw new s("JpegImage.parse - unknown marker: "+P.toString(16))}P=(0,r.readUint16)(t,g),g+=2}for(this.width=p.samplesPerLine,this.height=p.scanLines,this.jfif=b,this.adobe=v,this.components=[],T=0;T<p.components.length;T++){var Q=x[(X=p.components[T]).quantizationId];Q&&(X.quantizationTable=Q),this.components.push({output:f(0,X),scaleX:X.h/p.maxH,scaleY:X.v/p.maxV,blocksPerLine:X.blocksPerLine,blocksPerColumn:X.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData(e,t,n=!1){var i,r,s,o,a,c,l,h,f,u,d,p=this.width/e,m=this.height/t,g=0,b=this.components.length,v=e*t*b,y=new Uint8ClampedArray(v),x=new Uint32Array(e);let w;for(l=0;l<b;l++){if(r=(i=this.components[l]).scaleX*p,s=i.scaleY*m,g=l,d=i.output,o=i.blocksPerLine+1<<3,r!==w){for(a=0;a<e;a++)h=0|a*r,x[a]=(4294967288&h)<<3|7&h;w=r}for(c=0;c<t;c++)for(u=o*(4294967288&(h=0|c*s))|(7&h)<<3,a=0;a<e;a++)y[g]=d[u+x[a]],g+=b}let C=this._decodeTransform;if(n||4!==b||C||(C=new Int32Array([-256,255,-256,255,-256,255,-256,255])),C)for(l=0;l<v;)for(h=0,f=0;h<b;h++,l++,f+=2)y[l]=(y[l]*C[f]>>8)+C[f+1];return y},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform:1===this._colorTransform},_convertYccToRgb:function(e){for(var t,n,i,r=0,s=e.length;r<s;r+=3)t=e[r],n=e[r+1],i=e[r+2],e[r]=t-179.456+1.402*i,e[r+1]=t+135.459-.344*n-.714*i,e[r+2]=t-226.816+1.772*n;return e},_convertYcckToRgb:function(e){for(var t,n,i,r,s=0,o=0,a=e.length;o<a;o+=4)t=e[o],n=e[o+1],i=e[o+2],r=e[o+3],e[s++]=n*(-660635669420364e-19*n+.000437130475926232*i-54080610064599e-18*t+.00048449797120281*r-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*t-.00477271405408747*r+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*r+.48357088451265)+r*(-.000336197177618394*r+.484791561490776),e[s++]=107.268039397724+n*(219927104525741e-19*n-.000640992018297945*i+.000659397001245577*t+.000426105652938837*r-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*t+.000770482631801132*r-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*r+.25802910206845)+r*(-.000318913117588328*r-.213742400323665),e[s++]=n*(-.000570115196973677*n-263409051004589e-19*i+.0020741088115012*t-.00288260236853442*r+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*t+.000560833691242812*r-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*r+.116935020465145)+r*(-.000343531996510555*r+.24165260232407);return e.subarray(0,s)},_convertYcckToCmyk:function(e){for(var t,n,i,r=0,s=e.length;r<s;r+=4)t=e[r],n=e[r+1],i=e[r+2],e[r]=434.456-t-1.402*i,e[r+1]=119.541-t+.344*n+.714*i,e[r+2]=481.816-t-1.772*n;return e},_convertCmykToRgb:function(e){for(var t,n,i,r,s=0,o=0,a=e.length;o<a;o+=4)t=e[o],n=e[o+1],i=e[o+2],r=e[o+3],e[s++]=255+t*(-6747147073602441e-20*t+.0008379262121013727*n+.0002894718188643294*i+.003264231057537806*r-1.1185611867203937)+n*(26374107616089405e-21*n-8626949158638572e-20*i-.0002748769067499491*r-.02155688794978967)+i*(-3878099212869363e-20*i-.0003267808279485286*r+.0686742238595345)-r*(.0003361971776183937*r+.7430659151342254),e[s++]=255+t*(.00013596372813588848*t+.000924537132573585*n+.00010567359618683593*i+.0004791864687436512*r-.3109689587515875)+n*(-.00023545346108370344*n+.0002702845253534714*i+.0020200308977307156*r-.7488052167015494)+i*(6834815998235662e-20*i+.00015168452363460973*r-.09751927774728933)-r*(.0003189131175883281*r+.7364883807733168),e[s++]=255+t*(13598650411385307e-21*t+.00012423956175490851*n+.0004751985097583589*i-36729317476630422e-22*r-.05562186980264034)+n*(.00016141380598724676*n+.0009692239130725186*i+.0007782692450036253*r-.44015232367526463)+i*(5.068882914068769e-7*i+.0017778369011375071*r-.7591454649749609)-r*(.0003435319965105553*r+.7063770186160144);return e.subarray(0,s)},getData({width:e,height:t,forceRGB:n=!1,isSourcePDF:i=!1}){if(this.numComponents>4)throw new s("Unsupported color mode");var r=this._getLinearizedBlockData(e,t,i);if(1===this.numComponents&&n){for(var o=r.length,a=new Uint8ClampedArray(3*o),c=0,l=0;l<o;l++){var h=r[l];a[c++]=h,a[c++]=h,a[c++]=h}return a}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(r);if(4===this.numComponents){if(this._isColorConversionNeeded)return n?this._convertYcckToRgb(r):this._convertYcckToCmyk(r);if(n)return this._convertCmykToRgb(r)}return r}},t}();t.JpegImage=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JpxImage=void 0;var i=n(1),r=n(4),s=n(5);class o extends i.BaseException{constructor(e){super(`JPX error: ${e}`)}}var a=function(){var e={LL:0,LH:1,HL:1,HH:2};function t(){this.failOnCorruptedImage=!1}function n(e,t){e.x0=Math.ceil(t.XOsiz/e.XRsiz),e.x1=Math.ceil(t.Xsiz/e.XRsiz),e.y0=Math.ceil(t.YOsiz/e.YRsiz),e.y1=Math.ceil(t.Ysiz/e.YRsiz),e.width=e.x1-e.x0,e.height=e.y1-e.y0}function a(e,t){for(var n,i=e.SIZ,r=[],s=Math.ceil((i.Xsiz-i.XTOsiz)/i.XTsiz),o=Math.ceil((i.Ysiz-i.YTOsiz)/i.YTsiz),a=0;a<o;a++)for(var c=0;c<s;c++)(n={}).tx0=Math.max(i.XTOsiz+c*i.XTsiz,i.XOsiz),n.ty0=Math.max(i.YTOsiz+a*i.YTsiz,i.YOsiz),n.tx1=Math.min(i.XTOsiz+(c+1)*i.XTsiz,i.Xsiz),n.ty1=Math.min(i.YTOsiz+(a+1)*i.YTsiz,i.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],r.push(n);e.tiles=r;for(var l=0,h=i.Csiz;l<h;l++)for(var f=t[l],u=0,d=r.length;u<d;u++){var p={};n=r[u],p.tcx0=Math.ceil(n.tx0/f.XRsiz),p.tcy0=Math.ceil(n.ty0/f.YRsiz),p.tcx1=Math.ceil(n.tx1/f.XRsiz),p.tcy1=Math.ceil(n.ty1/f.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,n.components[l]=p}}function c(e,t,n){var i=t.codingStyleParameters,r={};return i.entropyCoderWithCustomPrecincts?(r.PPx=i.precinctsSizes[n].PPx,r.PPy=i.precinctsSizes[n].PPy):(r.PPx=15,r.PPy=15),r.xcb_=n>0?Math.min(i.xcb,r.PPx-1):Math.min(i.xcb,r.PPx),r.ycb_=n>0?Math.min(i.ycb,r.PPy-1):Math.min(i.ycb,r.PPy),r}function l(e,t,n){var i=1<<n.PPx,r=1<<n.PPy,s=0===t.resLevel,o=1<<n.PPx+(s?0:-1),a=1<<n.PPy+(s?0:-1),c=t.trx1>t.trx0?Math.ceil(t.trx1/i)-Math.floor(t.trx0/i):0,l=t.try1>t.try0?Math.ceil(t.try1/r)-Math.floor(t.try0/r):0,h=c*l;t.precinctParameters={precinctWidth:i,precinctHeight:r,numprecinctswide:c,numprecinctshigh:l,numprecincts:h,precinctWidthInSubband:o,precinctHeightInSubband:a}}function h(e,t,n){var i,r,s,o,a=n.xcb_,c=n.ycb_,l=1<<a,h=1<<c,f=t.tbx0>>a,u=t.tby0>>c,d=t.tbx1+l-1>>a,p=t.tby1+h-1>>c,m=t.resolution.precinctParameters,g=[],b=[];for(r=u;r<p;r++)for(i=f;i<d;i++){if((s={cbx:i,cby:r,tbx0:l*i,tby0:h*r,tbx1:l*(i+1),tby1:h*(r+1)}).tbx0_=Math.max(t.tbx0,s.tbx0),s.tby0_=Math.max(t.tby0,s.tby0),s.tbx1_=Math.min(t.tbx1,s.tbx1),s.tby1_=Math.min(t.tby1,s.tby1),o=Math.floor((s.tbx0_-t.tbx0)/m.precinctWidthInSubband)+Math.floor((s.tby0_-t.tby0)/m.precinctHeightInSubband)*m.numprecinctswide,s.precinctNumber=o,s.subbandType=t.type,s.Lblock=3,!(s.tbx1_<=s.tbx0_||s.tby1_<=s.tby0_)){g.push(s);var v=b[o];void 0!==v?(i<v.cbxMin?v.cbxMin=i:i>v.cbxMax&&(v.cbxMax=i),r<v.cbyMin?v.cbxMin=r:r>v.cbyMax&&(v.cbyMax=r)):b[o]=v={cbxMin:i,cbyMin:r,cbxMax:i,cbyMax:r},s.precinct=v}}t.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:d-f+1,numcodeblockhigh:p-u+1},t.codeblocks=g,t.precincts=b}function f(e,t,n){for(var i=[],r=e.subbands,s=0,o=r.length;s<o;s++)for(var a=r[s].codeblocks,c=0,l=a.length;c<l;c++){var h=a[c];h.precinctNumber===t&&i.push(h)}return{layerNumber:n,codeblocks:i}}function u(e){for(var t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],r=i.codingStyleDefaultParameters.layersCount,s=t.Csiz,a=0,c=0;c<s;c++)a=Math.max(a,i.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,h=0,u=0,d=0;this.nextPacket=function(){for(;l<r;l++){for(;h<=a;h++){for(;u<s;u++){var e=i.components[u];if(!(h>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[h],n=t.precinctParameters.numprecincts;d<n;){var c=f(t,d,l);return d++,c}d=0}}u=0}h=0}throw new o("Out of packets")}}function d(e){for(var t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],r=i.codingStyleDefaultParameters.layersCount,s=t.Csiz,a=0,c=0;c<s;c++)a=Math.max(a,i.components[c].codingStyleParameters.decompositionLevelsCount);var l=0,h=0,u=0,d=0;this.nextPacket=function(){for(;l<=a;l++){for(;h<r;h++){for(;u<s;u++){var e=i.components[u];if(!(l>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[l],n=t.precinctParameters.numprecincts;d<n;){var c=f(t,d,h);return d++,c}d=0}}u=0}h=0}throw new o("Out of packets")}}function p(e){var t,n,i,r,s=e.SIZ,a=e.currentTile.index,c=e.tiles[a],l=c.codingStyleDefaultParameters.layersCount,h=s.Csiz,u=0;for(i=0;i<h;i++){var d=c.components[i];u=Math.max(u,d.codingStyleParameters.decompositionLevelsCount)}var p=new Int32Array(u+1);for(n=0;n<=u;++n){var m=0;for(i=0;i<h;++i){var g=c.components[i].resolutions;n<g.length&&(m=Math.max(m,g[n].precinctParameters.numprecincts))}p[n]=m}t=0,n=0,i=0,r=0,this.nextPacket=function(){for(;n<=u;n++){for(;r<p[n];r++){for(;i<h;i++){var e=c.components[i];if(!(n>e.codingStyleParameters.decompositionLevelsCount)){var s=e.resolutions[n],a=s.precinctParameters.numprecincts;if(!(r>=a)){for(;t<l;){var d=f(s,r,t);return t++,d}t=0}}}i=0}r=0}throw new o("Out of packets")}}function m(e){var t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],r=i.codingStyleDefaultParameters.layersCount,s=t.Csiz,a=v(i),c=a,l=0,h=0,u=0,d=0,p=0;this.nextPacket=function(){for(;p<c.maxNumHigh;p++){for(;d<c.maxNumWide;d++){for(;u<s;u++){for(var e=i.components[u],t=e.codingStyleParameters.decompositionLevelsCount;h<=t;h++){var n=e.resolutions[h],m=a.components[u].resolutions[h],g=b(d,p,m,c,n);if(null!==g){for(;l<r;){var v=f(n,g,l);return l++,v}l=0}}h=0}u=0}d=0}throw new o("Out of packets")}}function g(e){var t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],r=i.codingStyleDefaultParameters.layersCount,s=t.Csiz,a=v(i),c=0,l=0,h=0,u=0,d=0;this.nextPacket=function(){for(;h<s;++h){for(var e=i.components[h],t=a.components[h],n=e.codingStyleParameters.decompositionLevelsCount;d<t.maxNumHigh;d++){for(;u<t.maxNumWide;u++){for(;l<=n;l++){var p=e.resolutions[l],m=t.resolutions[l],g=b(u,d,m,t,p);if(null!==g){for(;c<r;){var v=f(p,g,c);return c++,v}c=0}}l=0}u=0}d=0}throw new o("Out of packets")}}function b(e,t,n,i,r){var s=e*i.minWidth,o=t*i.minHeight;if(s%n.width!=0||o%n.height!=0)return null;var a=o/n.width*r.precinctParameters.numprecinctswide;return s/n.height+a}function v(e){for(var t=e.components.length,n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=0,s=0,o=new Array(t),a=0;a<t;a++){for(var c=e.components[a],l=c.codingStyleParameters.decompositionLevelsCount,h=new Array(l+1),f=Number.MAX_VALUE,u=Number.MAX_VALUE,d=0,p=0,m=1,g=l;g>=0;--g){var b=c.resolutions[g],v=m*b.precinctParameters.precinctWidth,y=m*b.precinctParameters.precinctHeight;f=Math.min(f,v),u=Math.min(u,y),d=Math.max(d,b.precinctParameters.numprecinctswide),p=Math.max(p,b.precinctParameters.numprecinctshigh),h[g]={width:v,height:y},m<<=1}n=Math.min(n,f),i=Math.min(i,u),r=Math.max(r,d),s=Math.max(s,p),o[a]={resolutions:h,minWidth:f,minHeight:u,maxNumWide:d,maxNumHigh:p}}return{components:o,minWidth:n,minHeight:i,maxNumWide:r,maxNumHigh:s}}function y(e){for(var t=e.SIZ,n=e.currentTile.index,i=e.tiles[n],r=t.Csiz,s=0;s<r;s++){for(var a=i.components[s],f=a.codingStyleParameters.decompositionLevelsCount,b=[],v=[],y=0;y<=f;y++){var x,w=c(0,a,y),C={},P=1<<f-y;if(C.trx0=Math.ceil(a.tcx0/P),C.try0=Math.ceil(a.tcy0/P),C.trx1=Math.ceil(a.tcx1/P),C.try1=Math.ceil(a.tcy1/P),C.resLevel=y,l(0,C,w),b.push(C),0===y)(x={}).type="LL",x.tbx0=Math.ceil(a.tcx0/P),x.tby0=Math.ceil(a.tcy0/P),x.tbx1=Math.ceil(a.tcx1/P),x.tby1=Math.ceil(a.tcy1/P),x.resolution=C,h(0,x,w),v.push(x),C.subbands=[x];else{var T=1<<f-y+1,I=[];(x={}).type="HL",x.tbx0=Math.ceil(a.tcx0/T-.5),x.tby0=Math.ceil(a.tcy0/T),x.tbx1=Math.ceil(a.tcx1/T-.5),x.tby1=Math.ceil(a.tcy1/T),x.resolution=C,h(0,x,w),v.push(x),I.push(x),(x={}).type="LH",x.tbx0=Math.ceil(a.tcx0/T),x.tby0=Math.ceil(a.tcy0/T-.5),x.tbx1=Math.ceil(a.tcx1/T),x.tby1=Math.ceil(a.tcy1/T-.5),x.resolution=C,h(0,x,w),v.push(x),I.push(x),(x={}).type="HH",x.tbx0=Math.ceil(a.tcx0/T-.5),x.tby0=Math.ceil(a.tcy0/T-.5),x.tbx1=Math.ceil(a.tcx1/T-.5),x.tby1=Math.ceil(a.tcy1/T-.5),x.resolution=C,h(0,x,w),v.push(x),I.push(x),C.subbands=I}}a.resolutions=b,a.subbands=v}var k=i.codingStyleDefaultParameters.progressionOrder;switch(k){case 0:i.packetsIterator=new u(e);break;case 1:i.packetsIterator=new d(e);break;case 2:i.packetsIterator=new p(e);break;case 3:i.packetsIterator=new m(e);break;case 4:i.packetsIterator=new g(e);break;default:throw new o(`Unsupported progression order ${k}`)}}function x(e,t,n,i){var s,o=0,a=0,c=!1;function l(e){for(;a<e;){var i=t[n+o];o++,c?(s=s<<7|i,a+=7,c=!1):(s=s<<8|i,a+=8),255===i&&(c=!0)}return s>>>(a-=e)&(1<<e)-1}function h(e){return 255===t[n+o-1]&&t[n+o]===e?(f(1),!0):255===t[n+o]&&t[n+o+1]===e&&(f(2),!0)}function f(e){o+=e}function u(){a=0,c&&(o++,c=!1)}function d(){if(0===l(1))return 1;if(0===l(1))return 2;var e=l(2);return e<3?e+3:(e=l(5))<31?e+6:(e=l(7))+37}for(var p=e.currentTile.index,m=e.tiles[p],g=e.COD.sopMarkerUsed,b=e.COD.ephMarkerUsed,v=m.packetsIterator;o<i;){u(),g&&h(145)&&f(4);var y=v.nextPacket();if(l(1)){for(var x,w=y.layerNumber,C=[],P=0,k=y.codeblocks.length;P<k;P++){var S=(x=y.codeblocks[P]).precinct,L=x.cbx-S.cbxMin,O=x.cby-S.cbyMin,A=!1,E=!1;if(void 0!==x.included)A=!!l(1);else{var D,M;if(void 0!==(S=x.precinct).inclusionTree)D=S.inclusionTree;else{var B=S.cbxMax-S.cbxMin+1,U=S.cbyMax-S.cbyMin+1;D=new I(B,U,w),M=new T(B,U),S.inclusionTree=D,S.zeroBitPlanesTree=M}if(D.reset(L,O,w))for(;;){if(!l(1)){D.incrementValue(w);break}if(!D.nextLevel()){x.included=!0,A=E=!0;break}}}if(A){if(E){for((M=S.zeroBitPlanesTree).reset(L,O);;)if(l(1)){if(!M.nextLevel())break}else M.incrementValue();x.zeroBitPlanes=M.value}for(var R=d();l(1);)x.Lblock++;var _=(0,r.log2)(R),F=l((R<1<<_?_-1:_)+x.Lblock);C.push({codeblock:x,codingpasses:R,dataLength:F})}}for(u(),b&&h(146);C.length>0;){var N=C.shift();void 0===(x=N.codeblock).data&&(x.data=[]),x.data.push({data:t,start:n+o,end:n+o+N.dataLength,codingpasses:N.codingpasses}),o+=N.dataLength}}}return o}function w(e,t,n,i,r,o,a,c){for(var l=i.tbx0,h=i.tby0,f=i.tbx1-i.tbx0,u=i.codeblocks,d="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?t:0,m=0,g=u.length;m<g;++m){var b=u[m],v=b.tbx1_-b.tbx0_,y=b.tby1_-b.tby0_;if(0!==v&&0!==y&&void 0!==b.data){var x,w;x=new k(v,y,b.subbandType,b.zeroBitPlanes,o),w=2;var C,P,T,I=b.data,S=0,L=0;for(C=0,P=I.length;C<P;C++)S+=(T=I[C]).end-T.start,L+=T.codingpasses;var O=new Uint8Array(S),A=0;for(C=0,P=I.length;C<P;C++){var E=(T=I[C]).data.subarray(T.start,T.end);O.set(E,A),A+=E.length}var D=new s.ArithmeticDecoder(O,0,S);for(x.setDecoder(D),C=0;C<L;C++){switch(w){case 0:x.runSignificancePropagationPass();break;case 1:x.runMagnitudeRefinementPass();break;case 2:x.runCleanupPass(),c&&x.checkSegmentationSymbol()}w=(w+1)%3}var M,B,U,R=b.tbx0_-l+(b.tby0_-h)*f,_=x.coefficentsSign,F=x.coefficentsMagnitude,N=x.bitsDecoded,z=a?0:.5;A=0;var H="LL"!==i.type;for(C=0;C<y;C++){var X=2*(R/f|0)*(t-f)+d+p;for(M=0;M<v;M++){if(0!==(B=F[A])){B=(B+z)*r,0!==_[A]&&(B=-B),U=N[A];var Y=H?X+(R<<1):R;e[Y]=a&&U>=o?B:B*(1<<o-U)}R++,A++}R+=f-v}}}}function C(t,n,i){for(var r=n.components[i],s=r.codingStyleParameters,o=r.quantizationParameters,a=s.decompositionLevelsCount,c=o.SPqcds,l=o.scalarExpounded,h=o.guardBits,f=s.segmentationSymbolUsed,u=t.components[i].precision,d=s.reversibleTransformation,p=d?new O:new L,m=[],g=0,b=0;b<=a;b++){for(var v=r.resolutions[b],y=v.trx1-v.trx0,x=v.try1-v.try0,C=new Float32Array(y*x),P=0,T=v.subbands.length;P<T;P++){var I,k;l?(I=c[g].mu,k=c[g].epsilon,g++):(I=c[0].mu,k=c[0].epsilon+(b>0?1-b:0));var S=v.subbands[P],A=e[S.type];w(C,y,0,S,d?1:2**(u+A-k)*(1+I/2048),h+k-1,d,f)}m.push({width:y,height:x,items:C})}var E=p.calculate(m,r.tcx0,r.tcy0);return{left:r.tcx0,top:r.tcy0,width:E.width,height:E.height,items:E.items}}function P(e,t){for(var n=e.SIZ.Csiz,i=e.tiles[t],r=0;r<n;r++){var s=i.components[r],o=void 0!==e.currentTile.QCC[r]?e.currentTile.QCC[r]:e.currentTile.QCD;s.quantizationParameters=o;var a=void 0!==e.currentTile.COC[r]?e.currentTile.COC[r]:e.currentTile.COD;s.codingStyleParameters=a}i.codingStyleDefaultParameters=e.currentTile.COD}t.prototype={parse:function(e){if(65359!==(0,r.readUint16)(e,0))for(var t=0,n=e.length;t<n;){var s=8,a=(0,r.readUint32)(e,t),c=(0,r.readUint32)(e,t+4);if(t+=s,1===a&&(a=4294967296*(0,r.readUint32)(e,t)+(0,r.readUint32)(e,t+4),t+=8,s+=8),0===a&&(a=n-t+s),a<s)throw new o("Invalid box field size");var l=a-s,h=!0;switch(c){case 1785737832:h=!1;break;case 1668246642:var f=e[t];if(1===f){var u=(0,r.readUint32)(e,t+3);switch(u){case 16:case 17:case 18:break;default:(0,i.warn)("Unknown colorspace "+u)}}else 2===f&&(0,i.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(e,t,t+l);break;case 1783636e3:218793738!==(0,r.readUint32)(e,t)&&(0,i.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var d=String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,255&c);(0,i.warn)("Unsupported header type "+c+" ("+d+")")}h&&(t+=l)}else this.parseCodestream(e,0,e.length)},parseImageProperties:function(e){for(var t=e.getByte();t>=0;){if(65361===(t<<8|(t=e.getByte()))){e.skip(4);var n=e.getInt32()>>>0,i=e.getInt32()>>>0,r=e.getInt32()>>>0,s=e.getInt32()>>>0;e.skip(16);var a=e.getUint16();return this.width=n-r,this.height=i-s,this.componentsCount=a,void(this.bitsPerComponent=8)}}throw new o("No size marker found in JPX stream")},parseCodestream:function(e,t,s){var c={},l=!1;try{for(var h=t;h+1<s;){var f=(0,r.readUint16)(e,h);h+=2;var u,d,p,m,g,b,v=0;switch(f){case 65359:c.mainHeader=!0;break;case 65497:break;case 65361:v=(0,r.readUint16)(e,h);var w={};w.Xsiz=(0,r.readUint32)(e,h+4),w.Ysiz=(0,r.readUint32)(e,h+8),w.XOsiz=(0,r.readUint32)(e,h+12),w.YOsiz=(0,r.readUint32)(e,h+16),w.XTsiz=(0,r.readUint32)(e,h+20),w.YTsiz=(0,r.readUint32)(e,h+24),w.XTOsiz=(0,r.readUint32)(e,h+28),w.YTOsiz=(0,r.readUint32)(e,h+32);var T=(0,r.readUint16)(e,h+36);w.Csiz=T;var I=[];u=h+38;for(var k=0;k<T;k++){var S={precision:1+(127&e[u]),isSigned:!!(128&e[u]),XRsiz:e[u+1],YRsiz:e[u+2]};u+=3,n(S,w),I.push(S)}c.SIZ=w,c.components=I,a(c,I),c.QCC=[],c.COC=[];break;case 65372:v=(0,r.readUint16)(e,h);var L={};switch(u=h+2,31&(d=e[u++])){case 0:m=8,g=!0;break;case 1:m=16,g=!1;break;case 2:m=16,g=!0;break;default:throw new Error("Invalid SQcd value "+d)}for(L.noQuantization=8===m,L.scalarExpounded=g,L.guardBits=d>>5,p=[];u<v+h;){var O={};8===m?(O.epsilon=e[u++]>>3,O.mu=0):(O.epsilon=e[u]>>3,O.mu=(7&e[u])<<8|e[u+1],u+=2),p.push(O)}L.SPqcds=p,c.mainHeader?c.QCD=L:(c.currentTile.QCD=L,c.currentTile.QCC=[]);break;case 65373:v=(0,r.readUint16)(e,h);var A,E={};switch(u=h+2,c.SIZ.Csiz<257?A=e[u++]:(A=(0,r.readUint16)(e,u),u+=2),31&(d=e[u++])){case 0:m=8,g=!0;break;case 1:m=16,g=!1;break;case 2:m=16,g=!0;break;default:throw new Error("Invalid SQcd value "+d)}for(E.noQuantization=8===m,E.scalarExpounded=g,E.guardBits=d>>5,p=[];u<v+h;)O={},8===m?(O.epsilon=e[u++]>>3,O.mu=0):(O.epsilon=e[u]>>3,O.mu=(7&e[u])<<8|e[u+1],u+=2),p.push(O);E.SPqcds=p,c.mainHeader?c.QCC[A]=E:c.currentTile.QCC[A]=E;break;case 65362:v=(0,r.readUint16)(e,h);var D={};u=h+2;var M=e[u++];D.entropyCoderWithCustomPrecincts=!!(1&M),D.sopMarkerUsed=!!(2&M),D.ephMarkerUsed=!!(4&M),D.progressionOrder=e[u++],D.layersCount=(0,r.readUint16)(e,u),u+=2,D.multipleComponentTransform=e[u++],D.decompositionLevelsCount=e[u++],D.xcb=2+(15&e[u++]),D.ycb=2+(15&e[u++]);var B=e[u++];if(D.selectiveArithmeticCodingBypass=!!(1&B),D.resetContextProbabilities=!!(2&B),D.terminationOnEachCodingPass=!!(4&B),D.verticallyStripe=!!(8&B),D.predictableTermination=!!(16&B),D.segmentationSymbolUsed=!!(32&B),D.reversibleTransformation=e[u++],D.entropyCoderWithCustomPrecincts){for(var U=[];u<v+h;){var R=e[u++];U.push({PPx:15&R,PPy:R>>4})}D.precinctsSizes=U}var _=[];if(D.selectiveArithmeticCodingBypass&&_.push("selectiveArithmeticCodingBypass"),D.resetContextProbabilities&&_.push("resetContextProbabilities"),D.terminationOnEachCodingPass&&_.push("terminationOnEachCodingPass"),D.verticallyStripe&&_.push("verticallyStripe"),D.predictableTermination&&_.push("predictableTermination"),_.length>0)throw l=!0,new Error("Unsupported COD options ("+_.join(", ")+")");c.mainHeader?c.COD=D:(c.currentTile.COD=D,c.currentTile.COC=[]);break;case 65424:v=(0,r.readUint16)(e,h),(b={}).index=(0,r.readUint16)(e,h+2),b.length=(0,r.readUint32)(e,h+4),b.dataEnd=b.length+h-2,b.partIndex=e[h+8],b.partsCount=e[h+9],c.mainHeader=!1,0===b.partIndex&&(b.COD=c.COD,b.COC=c.COC.slice(0),b.QCD=c.QCD,b.QCC=c.QCC.slice(0)),c.currentTile=b;break;case 65427:0===(b=c.currentTile).partIndex&&(P(c,b.index),y(c)),x(c,e,h,v=b.dataEnd-h);break;case 65365:case 65367:case 65368:case 65380:v=(0,r.readUint16)(e,h);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+f.toString(16))}h+=v}}catch(e){if(l||this.failOnCorruptedImage)throw new o(e.message);(0,i.warn)("JPX: Trying to recover from: "+e.message)}this.tiles=function(e){for(var t=e.SIZ,n=e.components,i=t.Csiz,r=[],s=0,o=e.tiles.length;s<o;s++){var a,c=e.tiles[s],l=[];for(a=0;a<i;a++)l[a]=C(e,c,a);var h,f,u,d,p,m,g,b=l[0],v=new Uint8ClampedArray(b.items.length*i),y={left:b.left,top:b.top,width:b.width,height:b.height,items:v},x=0;if(c.codingStyleDefaultParameters.multipleComponentTransform){var w=4===i,P=l[0].items,T=l[1].items,I=l[2].items,k=w?l[3].items:null;h=n[0].precision-8,f=.5+(128<<h);var S=c.components[0],L=i-3;if(d=P.length,S.codingStyleParameters.reversibleTransformation)for(u=0;u<d;u++,x+=L){p=P[u]+f,m=T[u],g=I[u];const e=p-(g+m>>2);v[x++]=e+g>>h,v[x++]=e>>h,v[x++]=e+m>>h}else for(u=0;u<d;u++,x+=L)p=P[u]+f,m=T[u],g=I[u],v[x++]=p+1.402*g>>h,v[x++]=p-.34413*m-.71414*g>>h,v[x++]=p+1.772*m>>h;if(w)for(u=0,x=3;u<d;u++,x+=4)v[x]=k[u]+f>>h}else for(a=0;a<i;a++){var O=l[a].items;for(h=n[a].precision-8,f=.5+(128<<h),x=a,u=0,d=O.length;u<d;u++)v[x]=O[u]+f>>h,x+=i}r.push(y)}return r}(c),this.width=c.SIZ.Xsiz-c.SIZ.XOsiz,this.height=c.SIZ.Ysiz-c.SIZ.YOsiz,this.componentsCount=c.SIZ.Csiz}};var T=function(){function e(e,t){var n=(0,r.log2)(Math.max(e,t))+1;this.levels=[];for(var i=0;i<n;i++){var s={width:e,height:t,items:[]};this.levels.push(s),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t){for(var n,i=0,r=0;i<this.levels.length;){var s=e+t*(n=this.levels[i]).width;if(void 0!==n.items[s]){r=n.items[s];break}n.index=s,e>>=1,t>>=1,i++}i--,(n=this.levels[i]).items[n.index]=r,this.currentLevel=i,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];return--e<0?(this.value=n,!1):(this.currentLevel=e,(t=this.levels[e]).items[t.index]=n,!0)}},e}(),I=function(){function e(e,t,n){var i=(0,r.log2)(Math.max(e,t))+1;this.levels=[];for(var s=0;s<i;s++){for(var o=new Uint8Array(e*t),a=0,c=o.length;a<c;a++)o[a]=n;var l={width:e,height:t,items:o};this.levels.push(l),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t,n){for(var i=0;i<this.levels.length;){var r=this.levels[i],s=e+t*r.width;r.index=s;var o=r.items[s];if(255===o)break;if(o>n)return this.currentLevel=i,this.propagateValues(),!1;e>>=1,t>>=1,i++}return this.currentLevel=i-1,!0},incrementValue:function(e){var t=this.levels[this.currentLevel];t.items[t.index]=e+1,this.propagateValues()},propagateValues:function(){for(var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];--e>=0;)(t=this.levels[e]).items[t.index]=n},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];return t.items[t.index]=255,!(--e<0)&&(this.currentLevel=e,(t=this.levels[e]).items[t.index]=n,!0)}},e}(),k=function(){var e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),t=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),n=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function i(i,r,s,o,a){let c;this.width=i,this.height=r,c="HH"===s?n:"HL"===s?t:e,this.contextLabelTable=c;var l=i*r;let h;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),h=a>14?new Uint32Array(l):a>6?new Uint16Array(l):new Uint8Array(l),this.coefficentsMagnitude=h,this.processingFlags=new Uint8Array(l);var f=new Uint8Array(l);if(0!==o)for(var u=0;u<l;u++)f[u]=o;this.bitsDecoded=f,this.reset()}return i.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(e,t,n){var i,r=this.neighborsSignificance,s=this.width,o=this.height,a=t>0,c=t+1<s;e>0&&(i=n-s,a&&(r[i-1]+=16),c&&(r[i+1]+=16),r[i]+=4),e+1<o&&(i=n+s,a&&(r[i-1]+=16),c&&(r[i+1]+=16),r[i]+=4),a&&(r[n-1]+=1),c&&(r[n+1]+=1),r[n]|=128},runSignificancePropagationPass:function(){for(var e=this.decoder,t=this.width,n=this.height,i=this.coefficentsMagnitude,r=this.coefficentsSign,s=this.neighborsSignificance,o=this.processingFlags,a=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,h=0;h<n;h+=4)for(var f=0;f<t;f++)for(var u=h*t+f,d=0;d<4;d++,u+=t){var p=h+d;if(p>=n)break;if(o[u]&=-2,!i[u]&&s[u]){var m=c[s[u]];if(e.readBit(a,m)){var g=this.decodeSignBit(p,f,u);r[u]=g,i[u]=1,this.setNeighborsSignificance(p,f,u),o[u]|=2}l[u]++,o[u]|=1}}},decodeSignBit:function(e,t,n){var i,r,s,o,a,c,l=this.width,h=this.height,f=this.coefficentsMagnitude,u=this.coefficentsSign;o=t>0&&0!==f[n-1],t+1<l&&0!==f[n+1]?(s=u[n+1],i=o?1-s-(r=u[n-1]):1-s-s):i=o?1-(r=u[n-1])-r:0;var d=3*i;return o=e>0&&0!==f[n-l],e+1<h&&0!==f[n+l]?(s=u[n+l],i=o?1-s-(r=u[n-l])+d:1-s-s+d):i=o?1-(r=u[n-l])-r+d:d,i>=0?(a=9+i,c=this.decoder.readBit(this.contexts,a)):(a=9-i,c=1^this.decoder.readBit(this.contexts,a)),c},runMagnitudeRefinementPass:function(){for(var e,t=this.decoder,n=this.width,i=this.height,r=this.coefficentsMagnitude,s=this.neighborsSignificance,o=this.contexts,a=this.bitsDecoded,c=this.processingFlags,l=n*i,h=4*n,f=0;f<l;f=e){e=Math.min(l,f+h);for(var u=0;u<n;u++)for(var d=f+u;d<e;d+=n)if(r[d]&&0==(1&c[d])){var p=16;if(0!=(2&c[d]))c[d]^=2,p=0===(127&s[d])?15:14;var m=t.readBit(o,p);r[d]=r[d]<<1|m,a[d]++,c[d]|=1}}},runCleanupPass:function(){for(var e,t=this.decoder,n=this.width,i=this.height,r=this.neighborsSignificance,s=this.coefficentsMagnitude,o=this.coefficentsSign,a=this.contexts,c=this.contextLabelTable,l=this.bitsDecoded,h=this.processingFlags,f=n,u=2*n,d=3*n,p=0;p<i;p=e){e=Math.min(p+4,i);for(var m=p*n,g=p+3<i,b=0;b<n;b++){var v,y=m+b,x=0,w=y,C=p;if(g&&0===h[y]&&0===h[y+f]&&0===h[y+u]&&0===h[y+d]&&0===r[y]&&0===r[y+f]&&0===r[y+u]&&0===r[y+d]){if(!t.readBit(a,18)){l[y]++,l[y+f]++,l[y+u]++,l[y+d]++;continue}0!==(x=t.readBit(a,17)<<1|t.readBit(a,17))&&(C=p+x,w+=x*n),v=this.decodeSignBit(C,b,w),o[w]=v,s[w]=1,this.setNeighborsSignificance(C,b,w),h[w]|=2,w=y;for(var P=p;P<=C;P++,w+=n)l[w]++;x++}for(C=p+x;C<e;C++,w+=n)if(!s[w]&&0==(1&h[w])){var T=c[r[w]];1===t.readBit(a,T)&&(v=this.decodeSignBit(C,b,w),o[w]=v,s[w]=1,this.setNeighborsSignificance(C,b,w),h[w]|=2),l[w]++}}}},checkSegmentationSymbol:function(){var e=this.decoder,t=this.contexts;if(10!==(e.readBit(t,17)<<3|e.readBit(t,17)<<2|e.readBit(t,17)<<1|e.readBit(t,17)))throw new o("Invalid segmentation symbol")}},i}(),S=function(){function e(){}return e.prototype.calculate=function(e,t,n){for(var i=e[0],r=1,s=e.length;r<s;r++)i=this.iterate(i,e[r],t,n);return i},e.prototype.extend=function(e,t,n){var i=t-1,r=t+1,s=t+n-2,o=t+n;e[i--]=e[r++],e[o++]=e[s--],e[i--]=e[r++],e[o++]=e[s--],e[i--]=e[r++],e[o++]=e[s--],e[i]=e[r],e[o]=e[s]},e.prototype.iterate=function(e,t,n,i){var r,s,o,a,c,l,h=e.width,f=e.height,u=e.items,d=t.width,p=t.height,m=t.items;for(o=0,r=0;r<f;r++)for(a=2*r*d,s=0;s<h;s++,o++,a+=2)m[a]=u[o];u=e.items=null;var g=new Float32Array(d+8);if(1===d){if(0!=(1&n))for(l=0,o=0;l<p;l++,o+=d)m[o]*=.5}else for(l=0,o=0;l<p;l++,o+=d)g.set(m.subarray(o,o+d),4),this.extend(g,4,d),this.filter(g,4,d),m.set(g.subarray(4,4+d),o);var b=16,v=[];for(r=0;r<b;r++)v.push(new Float32Array(p+8));var y,x=0;if(e=4+p,1===p){if(0!=(1&i))for(c=0;c<d;c++)m[c]*=.5}else for(c=0;c<d;c++){if(0===x){for(b=Math.min(d-c,b),o=c,a=4;a<e;o+=d,a++)for(y=0;y<b;y++)v[y][a]=m[o+y];x=b}var w=v[--x];if(this.extend(w,4,p),this.filter(w,4,p),0===x)for(o=c-b+1,a=4;a<e;o+=d,a++)for(y=0;y<b;y++)m[o+y]=v[y][a]}return{width:d,height:p,items:m}},e}(),L=function(){function e(){S.call(this)}return e.prototype=Object.create(S.prototype),e.prototype.filter=function(e,t,n){var i,r,s,o,a=n>>1,c=-1.586134342059924,l=-.052980118572961,h=.882911075530934,f=.443506852043971,u=1.230174104914001;for(i=(t|=0)-3,r=a+4;r--;i+=2)e[i]*=.8128930661159609;for(s=f*e[(i=t-2)-1],r=a+3;r--&&(o=f*e[i+1],e[i]=u*e[i]-s-o,r--);i+=2)s=f*e[(i+=2)+1],e[i]=u*e[i]-s-o;for(s=h*e[(i=t-1)-1],r=a+2;r--&&(o=h*e[i+1],e[i]-=s+o,r--);i+=2)s=h*e[(i+=2)+1],e[i]-=s+o;for(s=l*e[(i=t)-1],r=a+1;r--&&(o=l*e[i+1],e[i]-=s+o,r--);i+=2)s=l*e[(i+=2)+1],e[i]-=s+o;if(0!==a)for(s=c*e[(i=t+1)-1],r=a;r--&&(o=c*e[i+1],e[i]-=s+o,r--);i+=2)s=c*e[(i+=2)+1],e[i]-=s+o},e}(),O=function(){function e(){S.call(this)}return e.prototype=Object.create(S.prototype),e.prototype.filter=function(e,t,n){var i,r,s=n>>1;for(i=t|=0,r=s+1;r--;i+=2)e[i]-=e[i-1]+e[i+1]+2>>2;for(i=t+1,r=s;r--;i+=2)e[i]+=e[i-1]+e[i+1]>>1},e}();return t}();t.JpxImage=a}])}));